<div>
  <%= link_to_function "Back", "history.back()", :class => "btn btn-primary" %>
</div>
<div id="student_parent_dashboard">
  <div class="span10">
    <% if current_user.is_parent? && @parent_students.size > 0 %>
      <div class= "span4">
        <label>See data of :-</label>
        <%= form_tag(change_student_users_path, :method => :post, :remote => true, :id=>'select_student_form') do %>
          <%= select_tag "student_list", options_for_select(student_options_for_parent) %>
          <%= submit_tag "submit", :id=>"submit_student_list"%>
        <% end %>  
      </div>
    <% end %>
    
    <%=render partial:"change_date_range"%>  
    
  </div>    
  <div class="span10 move_down">
    <% if current_user.is_parent? %>
      <div id="student_detail" class="span">
        <b>Seeing data of student name :- <%= @parent_students.first.student_name%></b></br>
        <b>School Name:- <%= @parent_students.first.school.name %></br>
        <b>Grade Name:- <%= @parent_students.first.current_grade %></b>  
      </div>
    <% end %>
    <% if current_user.is_student? || current_user.is_school_administration? %>
      <div id="student_detail" class="span">
        <b>Seeing data of student name :- <%= @student.student_name%></b></br>
        <b>School Name:- <%= @student.school.name %></br>
        <b>Grade Name:- <%= @student.current_grade %></b>  
      </div>
    <% end %>
    <%=render partial:"current_month"%>
  
  </div>

  <div class='span10 move_down'>
    <b>Select a subject:-</b>
    <%= form_tag(change_subjects_users_path, :method => :post, :remote => true, :id=>'select_subject_form') do %>
      <%= hidden_field_tag :student_id_of_select_subject, @student.id %>
      <select id="select_subject" name="subjects[]" multiple="multiple">
        <% @subject_average.each do |subject,average| %>
          <option value="<%= subject %>"><%= subject %></option>
        <% end %>
      </select>  
      <%= submit_tag "submit", :id=>"submit_subject_list"%>
    <% end %>
    
  </div>
  <%= render partial:"show_average_and_noshow"%>

  <div id="graph" class="span7">
    <div id="chart_div" style="width: 700px; height: 500px;"></div>
    <div id="chart_div2" style="width: 700px; height: 500px;"></div>
  </div>
</div>


<script>
  var current_student_average = <%= raw @month_average %>
  var particular_students_average = <%= raw @average_particular_student_of_current_grade %>
  google.setOnLoadCallback(drawChart(current_student_average, particular_students_average ));
  
  function drawChart(current_student_average, particular_students_average) {
    var data = google.visualization.arrayToDataTable(current_student_average);
    var data2 = new google.visualization.arrayToDataTable(particular_students_average);
    var options = {
      title: 'Average Of Selected Student',
      vAxis: { title: "Average", minValue: 0, maxValue: 10 },
      hAxis: { title: "Month"},
      pointSize: 5
    };
    var options2 = {
      title: 'Average Of All Students Of the Grade',
      vAxis: { title: "Student Average", minValue: 0, maxValue: 10 },
      hAxis: { title: "Student name"},
      pointSize: 5,
      lineSize: 0,
      series: {
            0: {
                color: 'green'
            }
        }
    };
    
    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
    var chart2 = new google.visualization.LineChart(document.getElementById('chart_div2'));
    chart2.draw(data2, options2);
  }
</script>

